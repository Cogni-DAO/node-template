name: Enforce release/* → main PRs only

on:
  pull_request:
    branches: [main]

permissions: {} # lock GITHUB_TOKEN to no permissions

jobs:
  require-release-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Fail PR if head is not release/*
        if: ${{ !startsWith(github.head_ref, 'release/') }}
        run: |
          echo "Only branches matching release/* may open PRs into main."
          echo "Create a PR into staging, then a release/* branch, then PR release/* → main."
          exit 1
