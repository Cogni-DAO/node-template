# Cogni Git Review Repository Specification Template
# Copy this file to .cogni/repo-spec.yaml and customize for your repository

schema_version: "0.1.4"

# Unique identity for this node deployment — scopes all ledger tables.
# Generated once at init; must never change for an existing deployment.
node_id: "4ff8eac1-4eba-4ed0-931b-b1fe4f64713d"

intent:
  name: cogni-template

# Control GitHub check conclusion behavior for gate errors/timeouts
# false (default): errors/timeouts result in 'neutral' conclusion (non-blocking)
# true: errors/timeouts result in 'failure' conclusion (blocks merge)
fail_on_error: true

cogni_dao:
  dao_contract: "0xF61c3fafD4D34b4568e7a500d92b28Ac175e83C6" # Current Cogni parent DAO Contract Address
  plugin_contract: "0x609B427f04C1C42De3e28898cb7b9Bad329e6b77" # DAO's Aragon Voting Plugin Address
  signal_contract: "0x590FC79B9c925C377fA63F4AaF54cdbF4Ee273A1" # DAO's CogniSignal Contract Address
  chain_id: "8453" # Chain ID: Eth Sepolia testnet
  base_url: "https://proposal.cognidao.org" # v0 Base URL: cogni-proposal-launcher service

# DAO Financial Rails Configuration
# Inbound payment configuration for USDC credits top-up
payments_in:
  credits_topup:
    provider: cogni-usdc-backend-v1
    receiving_address: "0xF61c3fafD4D34b4568e7a500d92b28Ac175e83C6" # Expected receiver (DAO Wallet), testing only address rn
    allowed_chains:
      - Base
    allowed_tokens:
      - USDC

providers:
  openrouter:
    api_host: https://openrouter.ai/api/v1
    api_key_env: OPENROUTER_API_KEY
  # cherryservers:
  #   api_host: https://api.cherryservers.com/v1
  #   api_key_env: CHERRY_API_TOKEN

llm_proxy:
  host_env: LITELLM_PROXY_URL
  master_key_env: LITELLM_MASTER_KEY

secrets:
  manager:
    type: env

# Gates run in the order they appear below.
gates:
  # Built-in gates (run directly in bot process)
  - type: review-limits
    id: review_limits
    with:
      max_changed_files: 50
      max_total_diff_kb: 1500

  # Ensure */*/AGENTS.md files are updated when code changes
  # - type: agents-md-sync
  #   id: agents_md_sync
  # with:  # Optional configuration
  #   code_patterns: ["src/**/*.js", "lib/**/*.ts"]  # Files that require doc updates
  #   doc_pattern: "CLAUDE.md"                       # Documentation file to check. Default is AGENTS.md

  - type: ai-rule
    with:
      rule_file: pr-syntropy-coherence.yaml
  - type: ai-rule
    with:
      rule_file: patterns-and-docs.yaml
  - type: ai-rule
    with:
      rule_file: repo-goal-alignment.yaml

  ## template for adding a new rule.
  # - type: ai-rule
  #   with:
  #     rule_file: ai-rule-template.yaml

# Governance schedule definitions (charter-scoped per governance-council.md)
# Each schedule triggers an OpenClaw gateway run with a 1-word entrypoint.
# Cron Format syntax: https://crontab.guru/
governance:
  schedules:
    - charter: HEARTBEAT
      cron: "0 * * * *" # once per hour — git delta check + Discord status
      timezone: UTC
      entrypoint: HEARTBEAT
